<div class="img w-full">
  <div>
    <img src="https://rave.io/img/social_media_banner-6adf5bc26b.png" class="w-full" />
    <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
    </div>

  </div>
</div>


<% # The uniq function filters all events to just those that have unqiue names so that we don't show duplicates %>
<% unique_events = @events.uniq { |event| [event.name] } %>
<% trending_events = [] %>
<% rnb_events = [] %>
<% sports_events = [] %>
<% alternative_events = [] %>
<% jazz_events = [] %>
<% unique_events.each_with_index do |event, index| %>
  <% # I filtered the results for each category and used things like price to get a better set of results to show off%>
  <% if event.category == "Hip Hop" && event.price > 15 && event.price < 90 %>
  <% trending_events << event %>
  <% elsif event.category == "R&B" && event.price < 30 %>
  <% rnb_events << event %>
  <% elsif event.category == "Sports" && event.price > 0  %>
  <% sports_events << event %>
  <% elsif event.category == "Alternative" && event.price < 30%>
  <% alternative_events << event %>
  <% elsif event.category == "Jazz" && event.price < 30  %>
  <% jazz_events << event %>
  <% end %>
<% end %>

<div class="container">
  <h1 class="text-5xl font-bold mt-4 mb-6 m">Trending Events ðŸ”¥</h1>
  <div class="flex flex-row">

  <% # Used index to only show first four results %>
  <% trending_events.each_with_index do |event, index| %>
    <% if index < 4 %>

    <div class="card card-compact w-96 h-60 bg-base-100 shadow-xl mx-4 my-2">
      <figure><img src=<%= event.image_url %> class="w-full" /></figure>
      <div class="card-body">
        <% # Truncate function reduces the length of the name if its longer than 10 characters %>
        <h2 class="card-title"><%= event.name.truncate(10) %>
        <div class="badge badge-secondary">NEW</div></h2>
        <h3><%= event.location %> <%= event.date_details.day%>/<%= event.date_details.month%></h3>
        <div class="card-actions justify-end">
          <a href="<%= event.url %>" target="_blank"class="btn btn-primary">Buy Â£<%= event.price.round %></a>
        </div>
      </div>
    </div>

    <% end %>
  <% end %>

  </div>
</div>

<div class="container">
  <h1 class="text-5xl font-bold mt-4 mb-6 m">R&B Events</h1>
  <div class="flex flex-row">

  <% rnb_events.each_with_index do |event, index| %>
    <% if index < 4 %>

    <div class="card card-compact w-96 h-60 bg-base-100 shadow-xl mx-4 my-2">
      <figure><img src=<%= event.image_url %> class="w-full" /></figure>
      <div class="card-body">
        <h2 class="card-title"><%= event.name.truncate(10) %>
        <h3><%= event.location %> <%= event.date_details.day%>/<%= event.date_details.month%></h3>
        <div class="card-actions justify-end">
          <a href="<%= event.url %>" target="_blank"class="btn btn-primary">Buy Â£<%= event.price.round %></a>
        </div>
      </div>

    </div>

    <% end %>
  <% end %>

  </div>
</div>

<div class="container">
  <h1 class="text-5xl font-bold mt-4 mb-6 m">Sports Events</h1>
  <div class="flex flex-row">

  <% sports_events.each_with_index do |event, index| %>
    <% if index < 4 %>

    <div class="card card-compact w-96 h-60 bg-base-100 shadow-xl mx-4 my-2">
      <figure><img src=<%= event.image_url %> class="w-full" /></figure>
      <div class="card-body">
        <h2 class="card-title"><%= event.name.truncate(10) %>
        <h3><%= event.location %> <%= event.date_details.day%>/<%= event.date_details.month%></h3>
        <div class="card-actions justify-end">
          <a href="<%= event.url %>" target="_blank"class="btn btn-primary">Buy Â£<%= event.price.round %></a>
        </div>
      </div>
    </div>

    <% end %>
  <% end %>

  </div>
</div>

<div class="container">
  <h1 class="text-5xl font-bold mt-4 mb-6 m">Alternative Events</h1>
  <div class="flex flex-row">

  <% alternative_events.each_with_index do |event, index| %>
    <% if index < 4 %>

    <div class="card card-compact w-96 h-60 bg-base-100 shadow-xl mx-4 my-2">
      <figure><img src=<%= event.image_url %> class="w-full" /></figure>
      <div class="card-body">
        <h2 class="card-title"><%= event.name.truncate(10) %>
        <h3><%= event.location %> <%= event.date_details.day%>/<%= event.date_details.month%></h3>
        <div class="card-actions justify-end">
          <a href="<%= event.url %>" target="_blank"class="btn btn-primary">Buy Â£<%= event.price.round %></a>
        </div>
      </div>
    </div>

    <% end %>
  <% end %>

  </div>
</div>

<div class="container">
  <h1 class="text-5xl font-bold mt-4 mb-6 m">Jazz Events</h1>
  <div class="flex flex-row">

  <% jazz_events.each_with_index do |event, index| %>
    <% if index < 4 %>

    <div class="card card-compact w-96 h-60 bg-base-100 shadow-xl mx-4 my-2">
      <figure><img src=<%= event.image_url %> class="w-full" /></figure>
      <div class="card-body">
        <h2 class="card-title"><%= event.name.truncate(10) %>
        <h3><%= event.location %> <%= event.date_details.day%>/<%= event.date_details.month%></h3>
        <div class="card-actions justify-end">
          <a href="<%= event.url %>" target="_blank"class="btn btn-primary">Buy Â£<%= event.price.round %></a>
        </div>
      </div>
    </div>

    <% end %>
  <% end %>

  </div>
</div>

<div class="flex justify-center">
  <%= link_to "Explore All", events_path, class: "btn btn-wide text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:bg-gradient-to-l focus:ring-4 focus:outline-none focus:ring-purple-200 dark:focus:ring-purple-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 my-14 animate-bounce"%>
</div>
